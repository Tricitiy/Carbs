-- Get the ball's script
local ballScript = game.Workspace.Ball:WaitForChild("BallScript")

-- Get the player's character
local character = game.Players.LocalPlayer.Character

-- Get the GUI label
local label = Instance.new("TextLabel")
label.Name = "BallTargetLabel"
label.Parent = character.HumanoidRootPart
label.BackgroundTransparency = 1
label.Font = Enum.Font.SourceSansBold
label.Text = "Ball is not targeting you"
label.TextColor3 = Color3.new(1, 1, 1)
label.Position = UDim2.new(0, 0, 0, -50)

-- Function to check if the ball is targeting the player
local function isBallTargetingPlayer()
    -- Get the ball's position and direction
    local ballPosition = ballScript.Ball.Position
    local ballDirection = ballScript.Ball.CFrame.LookVector

    -- Get the player's position and direction
    local playerPosition = character.HumanoidRootPart.Position
    local playerDirection = character.HumanoidRootPart.CFrame.LookVector

    -- Calculate the vector from the ball to the player
    local vectorToPlayer = (playerPosition - ballPosition).Unit

    -- Check if the ball is pointing towards the player
    if math.abs(vectorToPlayer:Dot(ballDirection)) > 0.8 then
        return true
    else
        return false
    end
end

-- Function to update the label text
local function updateLabelText()
    if isBallTargetingPlayer() then
        label.Text = "Ball is targeting you!"
    else
        label.Text = "Ball is not targeting you"
    end
end

-- Update the label text initially
updateLabelText()

-- Connect the function to the ball's Touched event
game.Workspace.Ball.Touched:Connect(function(hit)
    if hit == character.HumanoidRootPart then
        -- If the ball touches the player, check if it's targeting the player
        updateLabelText()
    end
end)

-- Connect the function to the ball's PositionChanged event
ballScript.Ball.PositionChanged:Connect(function()
    updateLabelText()
end)
