-- Get the ball's script
local ballScript = game.Workspace.Ball:WaitForChild("BallScript")

-- Get the player's character
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- Create a BillboardGui with a TextLabel inside it
local billboard = Instance.new("BillboardGui")
billboard.Name = "BallTargetGui"
billboard.Size = UDim2.new(0, 200, 0, 50)
billboard.StudsOffset = Vector3.new(0, 3, 0)
billboard.Adornee = hrp
billboard.AlwaysOnTop = true
billboard.Parent = player:WaitForChild("PlayerGui")

local label = Instance.new("TextLabel")
label.Size = UDim2.new(1, 0, 1, 0)
label.BackgroundTransparency = 1
label.Font = Enum.Font.SourceSansBold
label.TextSize = 20
label.Text = "Ball is not targeting you"
label.TextColor3 = Color3.new(1, 1, 1)
label.Parent = billboard

-- Function to check if the ball is targeting the player
local function isBallTargetingPlayer()
    if not ballScript:FindFirstChild("Ball") then return false end

    local ball = ballScript.Ball
    local ballPosition = ball.Position
    local ballDirection = ball.CFrame.LookVector

    local playerPosition = hrp.Position
    local vectorToPlayer = (playerPosition - ballPosition).Unit

    -- Check dot product: closer to 1 = more directly aimed
    return vectorToPlayer:Dot(ballDirection) >= 0.7
end

-- Function to update the label text
local function updateLabelText()
    if isBallTargetingPlayer() then
        label.Text = "Ball is targeting you!"
        label.TextColor3 = Color3.new(1, 0, 0)
    else
        label.Text = "Ball is not targeting you"
        label.TextColor3 = Color3.new(1, 1, 1)
    end
end

-- Continuously update the label
game:GetService("RunService").RenderStepped:Connect(function()
    updateLabelText()
end)
