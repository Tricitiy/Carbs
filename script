local Players = game:GetService("Players")
local PathfindingService = game:GetService("PathfindingService")
local player = Players.LocalPlayer

-- Target coordinates to pathfind to
local targetPosition = Vector3.new(573, 282, -800)

-- Boolean to control the entire script's state
local scriptActive = true

-- Function to check if the player's Y position is above 280 and pathfind
local function checkAndPathfind()
    if not scriptActive then return end  -- Prevent pathfinding if the script is not active
    
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    -- Check if the Y position is above 280
    if humanoidRootPart.Position.Y > 280 then
        -- Create a path to the target position
        local path = PathfindingService:CreatePath({
            AgentRadius = 2,  -- Adjust these values based on your needs
            AgentHeight = 5,
            AgentCanJump = true,
            AgentJumpHeight = 10,
            AgentMaxSlope = 45,
        })

        -- Set the path target
        path:ComputeAsync(humanoidRootPart.Position, targetPosition)

        -- Wait for the path to be computed and start moving
        path:MoveTo(character)

        -- Listen for the path status
        path.StatusChanged:Connect(function(status)
            if status == Enum.PathStatus.Complete then
                print("Pathfinding complete!")
            elseif status == Enum.PathStatus.Problem then
                print("Pathfinding failed.")
            end
        end)
    else
        print("Player's Y position is below 280, not pathfinding.")
    end
end

-- BlockSliderButton Auto Block Functionality
blockSliderButton.MouseButton1Click:Connect(function()
    -- Toggle the entire script on or off
    scriptActive = not scriptActive

    if scriptActive then
        blockKnob:TweenPosition(UDim2.new(1, -19, 0, 1), "Out", "Quad", 0.2, true)
        blockKnob.BackgroundTransparency = 0
        blockSliderButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
        print("Script activated.")
    else
        blockKnob:TweenPosition(UDim2.new(0, 1, 0, 1), "Out", "Quad", 0.2, true)
        blockKnob.BackgroundTransparency = 0.2
        blockSliderButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        print("Script deactivated.")
    end
end)

-- Continuously check the player's position every frame
game:GetService("RunService").Heartbeat:Connect(function()
    checkAndPathfind()
end)
